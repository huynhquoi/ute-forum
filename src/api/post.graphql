fragment post on Post {
  postid
  user_post {
    userid
    fullname
  }
  content
  title
  createday
  updateday
  image
  ishide
  isdelete
  requiredreputation
  totalread
  group_post {
    groupid
    groupname
  }
}

fragment postDto on PostDto {
  postid
  user_post {
    userid
    fullname
  }
  content
  title
  createday
  updateday
  image
  ishide
  requiredreputation
  totalread
  group_post {
    groupid
    groupname
  }
  totallike
  totaldislike
  listtopic {
    posttopicid
    topic_posttopic {
      topicid
      topicname
    }
  }
}

fragment post_reacted on Post_Like {
  postlikeid
  post_postlike {
    postid
  }
  icon_postlike {
    iconid
  }
}

query GetPost($limit: Int, $pacing: Int) {
  post(limit: $limit, pacing: $pacing) {
    ...postDto
  }
}

query GetPostByUserId($userid: String) {
  find_post_by_userid(userid: $userid) {
    ...postDto
  }
}

query GetPostById($postid: Int) {
  find_post_by_id(postid: $postid) {
    ...postDto
  }
}

query GetPostByTopicId($topicid: Int) {
  find_post_by_topicid(topicid: $topicid) {
    ...postDto
  }
}

query GetPostReactedByUserId($userid: String) {
  find_postlike_byuserid(userid: $userid) {
    ...post_reacted
  }
}

mutation CreatePost(
  $post: PostRequest
  $user: UserRequest
  $topic: [TopicRequest]
) {
  create_post(post: $post, user: $user, topic: $topic)
}

mutation DeletePost($postid: Int) {
  delete_post_by_pk(postid: $postid)
}
